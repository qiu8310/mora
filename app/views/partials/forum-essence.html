<div class="page-wrapper" tabindex="-1">
  <div class="page-inner">


    <section class="normal" id="section-gitbook_111">

      <h1 id="closures-and-objects">Closures and Objects</h1>
      <p>As you know Javascript has two different ways to treat the data it receives as arguments of a function:</p>
      <ul>
        <li>Primitives are passed by copy.</li>
        <li>Objects are passed by reference.</li>
      </ul>
      <p>See the following code:</p>
<pre><code>var oPerson = { name: 'john' };

  (function(oTeacher) {
  window.getTeacher= function() {
  console.log(oTeacher);
  };
  }(oPerson));

  window.getTeacher();

  oPerson.surname = 'doe';

  window.getTeacher();

  oPerson = { name: 'mary', surname: 'sullivan' };

  window.getTeacher();
</code></pre><p>The first execution of window.getTeacher returns:</p>
<pre><code>Object { name: "john" }
</code></pre><p>The second execution of window.getTeacher returns:</p>
<pre><code>Object { name: "john", surname: "doe" }
</code></pre><p>The third execution of window.getTeacher returns:</p>
<pre><code>Object { name: "john", surname: "doe" }
</code></pre>

    </section>

    <section class="exercise" id="section-gitbook_112">

      <div class="header">
        <h2>Exercise</h2>
      </div>
      <div class="alert alert-success">
        <b>Correct!</b>
      </div>

      <div class="alert alert-danger error-message">
        <b>False!</b>
      </div>

      <div class="message">
        <p>Explain why this is happening:</p>

      </div>
      <div class="editor ace_editor ace-tomorrow" style="height: 20px"><textarea class="ace_text-input" wrap="off" spellcheck="false" style="opacity: 0; height: 19px; width: 8.40625px; right: 709.59375px; bottom: 29px;"></textarea><div class="ace_gutter"><div class="ace_layer ace_gutter-layer ace_folding-enabled" style="margin-top: 0px; height: 86px; width: 42px;"><div class="ace_gutter-cell " style="height: 19px;">1</div><div class="ace_gutter-cell " style="height: 19px;">2</div></div><div class="ace_gutter-active-line" style="top: 0px; height: 19px;"></div></div><div class="ace_scroller" style="left: 42px; right: 0px; bottom: 0px;"><div class="ace_content" style="margin-top: 0px; width: 722px; height: 86px; margin-left: 0px;"><div class="ace_layer ace_print-margin-layer"><div class="ace_print-margin" style="left: 676.5px; visibility: visible;"></div></div><div class="ace_layer ace_marker-layer"><div class="ace_active-line" style="height:19px;top:0px;left:0;right:0;"></div></div><div class="ace_layer ace_text-layer" style="padding: 0px 4px;"><div class="ace_line" style="height:19px"></div><div class="ace_line" style="height:19px"></div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_cursor-layer ace_hidden-cursors"><div class="ace_cursor" style="left: 4px; top: 0px; width: 8.40625px; height: 19px;"></div></div></div></div><div class="ace_scrollbar ace_scrollbar-v" style="display: none; width: 20px; bottom: 0px;"><div class="ace_scrollbar-inner" style="width: 20px; height: 38px;"></div></div><div class="ace_scrollbar ace_scrollbar-h" style="display: none; height: 20px; left: 42px; right: 0px;"><div class="ace_scrollbar-inner" style="height: 20px; width: 764px;"></div></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-family: inherit; font-size: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; overflow: hidden;"><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-family: inherit; font-size: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; overflow: visible;"></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-family: inherit; font-size: inherit; font-style: inherit; font-variant: inherit; font-stretch: inherit; line-height: inherit; overflow: visible;">X</div></div></div>

      <pre class="hidden code-solution">This is happening because when the closure has been executed it has saved the reference in memory for oPerson as oTeacher and even when oPerson has changed the assigned value to a different object it continues being referenced inside the closure. It is important to check this problems because if you make the same with DOM elements and the element is removed from the DOM tree you will get memory leaks issues</pre>
      <pre class="hidden code-validation">__match_answer_and_solution__</pre>


      <div class="buttons">
        <a href="#" class="button size-2 action-submit">Submit</a>
        <a href="#" class="button size-2 action-solution">Solution</a>
      </div>


    </section>

    <section class="exercise" id="section-gitbook_114">

      <div class="header">
        <h2>Exercise</h2>
      </div>
      <div class="alert alert-success">
        <b>Correct!</b>
      </div>

      <div class="alert alert-danger error-message">
        <b>False!</b>
      </div>

      <div class="message">
        <p>Fix the code to make the third execution return <code>Object { name: "mary", surname: "sullivan" }</code></p>

      </div>
      <div class="editor ace_editor ace-tomorrow" style="height: 300px"><textarea class="ace_text-input" wrap="off" spellcheck="false" style="opacity: 0; height: 19px; width: 8.40625px; right: 701.59375px; bottom: 279px;"></textarea><div class="ace_gutter"><div class="ace_layer ace_gutter-layer ace_folding-enabled" style="margin-top: 0px; height: 336px; width: 50px;"><div class="ace_gutter-cell " style="height: 19px;">1</div><div class="ace_gutter-cell " style="height: 19px;">2</div><div class="ace_gutter-cell " style="height: 19px;">3<span class="ace_fold-widget ace_start ace_open" style="height: 19px;"></span></div><div class="ace_gutter-cell " style="height: 19px;">4<span class="ace_fold-widget ace_start ace_open" style="height: 19px;"></span></div><div class="ace_gutter-cell " style="height: 19px;">5</div><div class="ace_gutter-cell " style="height: 19px;">6</div><div class="ace_gutter-cell " style="height: 19px;">7</div><div class="ace_gutter-cell " style="height: 19px;">8</div><div class="ace_gutter-cell " style="height: 19px;">9</div><div class="ace_gutter-cell " style="height: 19px;">10</div><div class="ace_gutter-cell " style="height: 19px;">11</div><div class="ace_gutter-cell " style="height: 19px;">12</div><div class="ace_gutter-cell " style="height: 19px;">13</div><div class="ace_gutter-cell " style="height: 19px;">14</div><div class="ace_gutter-cell " style="height: 19px;">15</div><div class="ace_gutter-cell " style="height: 19px;">16</div><div class="ace_gutter-cell " style="height: 19px;">17</div></div><div class="ace_gutter-active-line" style="top: 0px; height: 19px;"></div></div><div class="ace_scroller" style="left: 50px; right: 0px; bottom: 0px;"><div class="ace_content" style="margin-top: 0px; width: 714px; height: 336px; margin-left: 0px;"><div class="ace_layer ace_print-margin-layer"><div class="ace_print-margin" style="left: 676.5px; visibility: visible;"></div></div><div class="ace_layer ace_marker-layer"><div class="ace_active-line" style="height:19px;top:0px;left:0;right:0;"></div></div><div class="ace_layer ace_text-layer" style="padding: 0px 4px;"><div class="ace_line" style="height:19px"><span class="ace_storage ace_type">var</span>&nbsp;<span class="ace_identifier">oPerson</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_paren ace_lparen">{</span>&nbsp;<span class="ace_identifier">name</span><span class="ace_punctuation ace_operator">:</span>&nbsp;<span class="ace_string">'john'</span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span></div><div class="ace_line" style="height:19px"></div><div class="ace_line" style="height:19px"><span class="ace_paren ace_lparen">(</span><span class="ace_storage ace_type">function</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">oTeacher</span><span class="ace_paren ace_rparen">)</span>&nbsp;<span class="ace_paren ace_lparen">{</span></div><div class="ace_line" style="height:19px">&nbsp;&nbsp;&nbsp;<span class="ace_storage ace_type">window</span><span class="ace_punctuation ace_operator">.</span><span class="ace_entity ace_name ace_function">getTeacher</span><span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_storage ace_type">function</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>&nbsp;<span class="ace_paren ace_lparen">{</span></div><div class="ace_line" style="height:19px"><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;<span class="ace_storage ace_type">console</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_firebug">log</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">oTeacher</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span></div><div class="ace_line" style="height:19px">&nbsp;&nbsp;&nbsp;<span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span></div><div class="ace_line" style="height:19px"><span class="ace_paren ace_rparen">}</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">oPerson</span><span class="ace_paren ace_rparen">))</span><span class="ace_punctuation ace_operator">;</span></div><div class="ace_line" style="height:19px"></div><div class="ace_line" style="height:19px"><span class="ace_variable ace_language">window</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">getTeacher</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span></div><div class="ace_line" style="height:19px"></div><div class="ace_line" style="height:19px"><span class="ace_identifier">oPerson</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">surname</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_string">'doe'</span><span class="ace_punctuation ace_operator">;</span></div><div class="ace_line" style="height:19px"></div><div class="ace_line" style="height:19px"><span class="ace_variable ace_language">window</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">getTeacher</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span></div><div class="ace_line" style="height:19px"></div><div class="ace_line" style="height:19px"><span class="ace_identifier">oPerson</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_paren ace_lparen">{</span>&nbsp;<span class="ace_identifier">name</span><span class="ace_punctuation ace_operator">:</span>&nbsp;<span class="ace_string">'mary'</span><span class="ace_punctuation ace_operator">,</span>&nbsp;<span class="ace_identifier">surname</span><span class="ace_punctuation ace_operator">:</span>&nbsp;<span class="ace_string">'sullivan'</span>&nbsp;<span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span></div><div class="ace_line" style="height:19px"></div><div class="ace_line" style="height:19px"><span class="ace_variable ace_language">window</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">getTeacher</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span></div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_cursor-layer ace_hidden-cursors"><div class="ace_cursor" style="left: 4px; top: 0px; width: 8.40625px; height: 19px;"></div></div></div></div><div class="ace_scrollbar ace_scrollbar-v" style="width: 20px; bottom: 0px;"><div class="ace_scrollbar-inner" style="width: 20px; height: 323px;"></div></div><div class="ace_scrollbar ace_scrollbar-h" style="display: none; height: 20px; left: 50px; right: 0px;"><div class="ace_scrollbar-inner" style="height: 20px; width: 764px;"></div></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-family: inherit; font-size: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; overflow: hidden;"><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-family: inherit; font-size: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; overflow: visible;"></div><div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-family: inherit; font-size: inherit; font-style: inherit; font-variant: inherit; font-stretch: inherit; line-height: inherit; overflow: visible;">X</div></div></div>

<pre class="hidden code-solution">var oPerson = { name: 'john'};

window.getTeacher= function() {
  console.log(oPerson);
};

window.getTeacher();

oPerson.surname = 'doe';

window.getTeacher();

oPerson = { name: 'mary', surname: 'sullivan' };

window.getTeacher();</pre>
      <pre class="hidden code-validation">assert(items.length == 3 &amp;&amp; items[2].name == 'mary' &amp;&amp; items[2].surname == 'sullivan');</pre>

<pre class="hidden code-context">var items = [];
var backConsole = console;
var console = {
    log: function (str) {
        items.push(str);
        if(items.length === 3)
        {
            console = backConsole;
        }else{
            backConsole.log(str);
        }
    }
};</pre>


      <div class="buttons">
        <a href="#" class="button size-2 action-submit">Submit</a>
        <a href="#" class="button size-2 action-solution">Solution</a>
      </div>


    </section>


  </div>
</div>